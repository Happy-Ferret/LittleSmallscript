<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <title>LittleSmallscript</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LittleSmallscript is a dialect of Smalltalk that compiles into JavaScript">
    <meta name="author" content="Minori Yamashita">
    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body { padding-top: 60px; /* 60px to make the container go all the way
      to the bottom of the topbar */ }
    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
    <link href="assets/css/prettify.css" rel="stylesheet">
    <link href="assets/css/sub.css" rel="stylesheet">
</head>
  
  <body>
    <div class="navbar navbar-fixed-top nav-bar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">
            LittleSmallscript
          </a>
          <ul class="nav">
            <li>
              <a id="table-of-contents-toggle" href="#">
                <b>
                  TABLE OF CONTENTS
                </b>
              </a>
            </li>
            <li>
            </li>
            <li>
            </li>
            <ul class="nav">
              <li>
                <a id="try-little-smallscript-toggle" href="#">
                  <b>
                    TRY LITTLESMALLSCRIPT
                  </b>
                </a>
              </li>
              <li>
                <a id="fork-me-on-github" href="https://github.com/ympbyc/LittleSmallscript">
                  <b>
                    FORK ME ON GITHUB
                  </b>
                </a>
              </li>
              <li class="error" style="display:none">
                <a href="#">
                  <b id="lss-error">
                  </b>
                </a>
              </li>
            </ul>
          </ul>
        </div>
      </div>
    </div><!-- /navbar -->
    <div id="dropdown">
      <div id="table-of-contents" class="hidden">
        <ul>
          <li><a href="#overview">Overview</a></li>
          <li><a href="#installation">Installation</a></li>
          <li><a href="#usage">Usage</a></li>
          <li><a href="#language-reference">Language Reference</a></li>
          <li><a href="#changelog">Change Log</a></li>
        </ul>
      </div>
      <div id="try-little-smallscript" class="hidden">
        <div class="console">
          <textarea class="console-left" id="lss-source"></textarea>
          <textarea class="console-right" id="js-source"></textarea>
          <div class="console-buttons">
            <a href="#" id="eval-button" class="btn btn-success"><i class="icon-white icon-play"></i> Run</a>
          </div>
        </div>
      </div>
    </div>

    <div class="container" id="mainWrap">
      <div id="introduction">
        <p>
          <strong>Little Smallscript is a dialect of Smalltalk that compiles into JavaScript.</strong> Hidden behind the huge Smalltalk Environment, Smalltalk always had a beautiful syntax that is fit for object oriented scripting. Little Smallscript is an attempt to let Smalltalk see the light of day again. (Although I've never written Smalltalk before ;p)
        </p>
        <p>
The golden rule of LittleSmallscript is: <em>"It's just JavaScript"</em>. The code compiles one-to-one into the equivalent JS, and there is no interpretation at runtime. You can use any existing JavaScript library seamlessly from LittleSmallscript (and vice-versa). The compiled output is readable and pretty-printed, passes through <a href="http://www.jshint.com">JSHint</a> without warnings, will work in every JavaScript runtime, and tends to run as fast or faster than the equivalent handwritten JavaScript.  <span class="grey">This paragraph is borrowed from coffeescript.org</span>
        </p>
        <p>
          <strong>Latest Version:</strong> <span class="underline">0.0.3</span>
      </div>
      <div id="overview">
        <h2>Overview</h2>
        <p>
          <em>LittleSmallscript on the left, compiled JavaScript output on the right.</em>
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
"Variable declaration"
| number opposite square list math cubes |

"Assignment:"
number   := 42.
opposite := true.

"Conditions:"
number := opposite ifTrue: [-42].

"Functions:"
square := [:x | x * x].

"Arrays:"
list := #(1 2 3 4 5).

"Objects:"
math := #{
  #root: Math at: sqrt
  #square: square 
  #cube: [:x | square value: x * x]
}.

"Prelude methods:"
cubes := list collect: [:num | math cube: num]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var number, opposite, square, list, math, cubes;

number = 42;

opposite = true;

number = opposite ? (function () {
  return -42;
})() : void 0;

square = function (x) {
  return (x * x);
};

list = [1, 2, 3, 4, 5];

math = {
  "root": Math[sqrt],
  "square": square,
  "cube": function (x) {
    return (square(x) * x);
  }
};

cubes = list.collect(function (num) {
  return math.cube(num);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
      </div>
      
      <div id="installation">
        <h2>Installation</h2>
        <p>This section is yet to be written. Until then, get it from <a href="https://github.com/ympbyc/LittleSmallscript">ympbyc/LittleSmallscript - Github</a></p>
      </div>
      
      <div id="usage">
        <h2>Usage</h2>
        <p>This section is also yet to be written. Command-line tool itself is already available and is in the /src directory.</p>
      </div>
      
      <div id="language-reference">
        <h2>Language Reference</h2>
        <p>blah blah blah</p>

        <h3>Syntax</h3>
        <p>
          LittleSmallscript has a minimum set of syntax that everyone can learn in a few minutes.
        </p>

        <p>A statement starts with an optional variable declaration</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| message1 message2 numbers |
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var message1, message2, numbers;
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>A statement body is made of one or more expressions separated by periods</p>
        <p class="note">A period is a <em>separator</em>, not <em>terminator</em>. Therefore the last expression in a statement CANNOT have a period at its tail.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
'hello'.
1234
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
"hello";
1234;
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>Assingnments can only appear at the start of an expression</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
message1 := message2 := 'Hello, world!'.
numbers := #(1 2 3 4 5)
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
message1 = message2 = "Hello, world!";
numbers = [1, 2, 3, 4, 5];
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>A message passing expression starts with a receiver followed by selector(s) and arguments</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
"Unary messages take no arguments"
numbers pop.

"Binary messages take a JS operator and an argument"
2 + 3.

"Keyword messages take one or more selectors and arguments"
numbers at: 4 put: 100.

"Messages can be chained. This example is interpreted as ((Date new) getTime)"
Date new getTime
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
numbers.pop();

(2 + 3);

numbers[4] = 100;

(new Date().getTime());
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>
          Cascades are generalized form of method chaining. The left most expression becomes the receiver for all of the following messages. The product of this expression is the receiver.
        </p>
        <p class="note">
          LittleSmallscript implements Little Smalltalk style cascades. Their behaviour differ from cascades in other common implementation of Smalltalk.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
Object new ; at: 'a' put: 1 ; at: 'b' put: 2 ; at: 'c' put: 3
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
(function () {
  var _receiver = new Object();
  _receiver.atput("a", 1);
  _receiver.atput("b", 2);
  _receiver.atput("c", 3);
  return _receiver;
})();
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">


        <h3>Function</h3>
        <p>
          Functions are defined by an open bracket, optional list of parameters followed by a vertical bar, the function body, and the closing bracket. The empty function looks like this: <span class="whiteback">[]</span>
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| square cube |

square := [:x | x * x].
cube := [:x | square value: x * x].

[:x| | foo |
  foo := x. 
  foo
] value: 2
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var square, cube;

square = function (x) {
  return (x * x);
};

cube = function (x) {
  return (square(x) * x);
};

(function (x) {
  var foo;
  foo = x;
  return foo;
})(2);
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Literals</h3>
        <p>
          The LittleSmallscriptscript literal for Arrays look similar to that of Smalltalk. 
          However they accept and evaluate any expression thrown into them. (in Smalltalk, only limited variety of elements are accepted)
        </p>
        <p>
          In JavaScript, objects are often used as hashes. Unlike Smalltalk, where you manualy have to "new" and "at:put:" to the Dictionary, Little Smallscript has an literal for creating objects.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| string shortString song singers bitlist kids |

"I am a
multi line comment"

string := 'I am a string. It is OK to have
newlines
inside of me'.

"A string composed of an Alpabetic character followed by Alpha-numeric characters can be created with #"
shortString := #foo.

"numbers"
1 .
-4 .

"array"
song := #('do' 're' 'mi' 'fa' 'so').

"hash"
singers := #{#Jagger: 'Rock' #Elvis: 'Roll'}.

bitlist := #(
  1 0 1
  0 0 1
  1 1 0
).

kids := #{
  #brother: #{
    #name: 'Max'
    #age:  11
  }
  #sister: #{
    #name: 'Ida'
    #age:  9
  }
}
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var string, shortString, song, singers, bitlist, kids;

string = "I am a string. It is OK to have\nnewlines\ninside of me";

shortString = "foo";

1;
-4;

song = ["do", "re", "mi", "fa", "so"];

singers = {
  "Jagger": "Rock",
  "Elvis": "Roll"
};

bitlist = [1, 0, 1, 0, 0, 1, 1, 1, 0];

kids = {
  "brother": {
    "name": "Max",
    "age": 11
  },
  "sister": {
    "name": "Ida",
    "age": 9
  }
};
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <h3>Local Variable Declarations</h3>
        <p>
          Variable declaration can only appear at the start of a statement.
          Space delimited alpha-numeric charactors placed between two vertical bars are declared as local variables.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| foo bar |
foo := bar := 1.
[| foo | 
  foo := 2.
  foo
] value. "=> 2"
foo      "=> 1"
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var foo, bar;
foo = bar = 1;
(function () {
  var foo;
  foo = 2;
  return foo
})(); //=> 2
foo;  //=> 1
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <p>Little Smallscript is a lexicaly scoped language. Temporary variables are enclosed in its function scope.</p>
        <br class="clear">

        <h3>IfTrue, IfFalse, and Conditional Assignment</h3>
        <p>There are no "if then else" syntax in Smalltalk. Instead "ifTrue" and "ifFalse" are defined as a method of Boolean's instances.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
1 ifTrue: ['1 is true'].
0 ifFalse: ['0 is false'].
foo := x ifTrue: [1] ifFalse: [2]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
/* When optimization is enabled */
1 ? (function () { return '1 is true'; })() : void 0;
0 ? void 0 : (function () { return '0 is false'; })();
foo = x ? (function () { return 1; })() : (function () { return 2; })();
              
/* When optimization is disabled */
(1).ifTrue(function () { return '1 is true'; });
(0).ifFalse(function () { return '0 is false' });
foo = x.ifTrueifFalse(function () { return 1; }, function () { return 2; });
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <p>When optimization is enabled, ifTrue and ifFalse are compiled into conditional expressions for efficiency.</p>
        <br class="clear">

        <h3>Iteration Over Objects and Arrays</h3>
        <p>
          Various iteration methods are provided via the prelude module.
          The most basic one is "do" and "collect" (they are identical to Array.forEach and Array.map in JS)
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| yearsOld |

"Eat Lunch"
#(#toast #cheese #wine) do: [:food | eat value: food].

"Objects"
yearsOld := #{#max:10 #ida:9 #tim:11}.
ages := yearsOld collect: [:age :child | 
  child + ' is ' + age
]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var yearsOld;

["toast", "cheese", "wine"].do_(function (food) {
  eat(food);
});

yearsOld = {"max":10, "ida":9, "tim":11};
ages = yearsOld.collect(function (age, child) {
  return ((child + " is ") + age);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        <p>While loop is created with whileTrue - instance method of Function.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| counter |
counter := 0.
[counter &lt; 10] whileTrue: [window alert: counter. counter <+=> 1]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var counter;

counter = 0;

(function () {
  return (counter &lt; 10);
}).whileTrue(function () {
  window.alert(counter);
  return counter += 1;
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Classes and Inheritance</h3>
        <p>
          Little `Smalltalk' and other Smalltalk dialects have special syntax for defining classes; LittleSmallscript doesn't.<br>
          Since classes are first class objects, they are capable of handling messages. New class is created by passing "subclass" message to an existing class, and methods are attached to it with "method:at:" or "method:withKeywords:".
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| Animal Snake sam |

Animal := Object subclass.

Animal method: [:name | 
  self at: #name put: name
] at: #init.

Animal method: [:metres |
  window alert: (@name + ' moved ' + metres + 'm.')
] at: #move.

Snake := Animal subclass.
Snake method: [
  "'super' is not supported yet"
  window alert: 'Slithering...'.
  self move: 5
] at: #crawl.

sam := Snake new: 'Sammy the Python'.
sam crawl
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var Animal, Snake, sam;

Animal = (function (_super) {
  var _Constructor;
  _Constructor = function ( /* &rest arguments */ ) {
    if (this.init) this.init.apply(this, arguments);
  };
  _Constructor.prototype = new _super();
  return _Constructor;
})(Object);

Animal.prototype["init"] = function (name) {
  return this["name"] = name;
};
Animal.prototype["move"] = function (metres) {
  return window.alert((((this.name + "moved ") + metres) + "m."));
};

Snake = (function (_super) {
  var _Constructor;
  _Constructor = function ( /* &rest arguments */ ) {
    if (this.init) this.init.apply(this, arguments);
  };
  _Constructor.prototype = new _super();
  return _Constructor;
})(Animal);

Snake.prototype["crawl"] = function () {
  window.alert("Slithering...");
  return this.move(5);
};
sam = new Snake("Sammy the Python");
sam.crawl();
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Embedded Javascript</h3>
        <p>
          Hopefully, you'll never need to use it, but if you ever need to intersperse snippets of JavaScript within your LittleSmallscript, you can use  &lt; and &gt; to pass it straight through.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
hi := &lt;function () {
  return [document.title, "Hello Javascript"].join(": ");
}&gt;.
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
hi = function () {
  return [document.title, "Hello Javascript"].join(": ");
};
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <h3>Try/Catch/Finally</h3>
        <p>tryCatch: and tryCatch:finally: are instance methods of Function</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
[
  allHellBreaksLoose.
  catsAndDogsLivingTogether
] tryCatch: [:error | 
  window alert: err
] finally: [
  cleanUp value
] value
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
(function () {
  allHellBreaksLoose;
  return catsAndDogsLivingTogether;
}).tryCatchfinally(function (error) {
  return window.alert(err);
}, function () {
  return cleanUp();
})();
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

      </div><!-- /reference -->
      <br class="clear">
      
      <div id="changelog">
        <h2>Change Log</h2>
        <span class="idle"><a href="https://github.com/ympbyc/LittleSmallscript/tree/v0.0.3">v0.0.4</a></span><span> - Sep 20, 2012</span>
        <p>
          Binary selectors are now bare js operators. (e.g: before: 1 <+> 1 now: 1 + 1)
        </p>


        <span class="idle"><a href="https://github.com/ympbyc/LittleSmallscript/tree/v0.0.3">v0.0.3</a></span><span> - Sep 19, 2012</span>
        <p>
          Hello, world!
        </p>
      </div>
      <br class="clear">
    
    </div>
    <br class="clear">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script src="assets/js/bootstrap.js">
    </script>
    <script src="assets/js/prettify.js">
    </script>

    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/packratparser.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/littleparsers.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/blockparser.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/optimization.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/expressionparser.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/statementparser.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/littlesmallscript.js"></script>
    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/src/littlesmallmethods.js"></script>
    <script src="assets/js/beautify.js"></script>

    <script src="assets/js/lssweb.js">
    </script>
  </body>

</html>
