<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <title>LittleSmallscript</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LittleSmallscript is a dialect of Smalltalk that compiles into JavaScript">
    <meta name="author" content="Minori Yamashita">
    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body { padding-top: 60px; /* 60px to make the container go all the way
      to the bottom of the topbar */ }
    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
    <link href="assets/css/prettify.css" rel="stylesheet">
    <link href="assets/css/sub.css" rel="stylesheet">
</head>
  
  <body>
    <div class="navbar navbar-fixed-top nav-bar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">
            LittleSmallscript
          </a>
          <ul class="nav">
            <li>
              <a id="table-of-contents-toggle" href="#">
                <b>
                  TABLE OF CONTENTS
                </b>
              </a>
            </li>
            <li>
            </li>
            <li>
            </li>
            <ul class="nav">
              <li>
                <a id="try-little-smallscript-toggle" href="#">
                  <b>
                    TRY LITTLESMALLSCRIPT
                  </b>
                </a>
              </li>
              <li>
                <a id="examples" href="https://github.com/ympbyc/LittleSmallscript/tree/master/examples">
                  <b>
                    EXAMPLES
                  </b>
                </a>
              </li>
              <li>
                <a id="fork-me-on-github" href="https://github.com/ympbyc/LittleSmallscript">
                  <b>
                    FORK ME ON GITHUB
                  </b>
                </a>
              </li>
              <li class="error" style="display:none">
                <a href="#">
                  <b id="lss-error">
                  </b>
                </a>
              </li>
            </ul>
          </ul>
        </div>
      </div>
    </div><!-- /navbar -->
    <div id="dropdown">
      <div id="table-of-contents" class="hidden">
        <ul>
          <li><a href="#overview">Overview</a></li>
          <li><a href="#installation">Installation</a></li>
          <li><a href="#usage">Usage</a></li>
          <li><a href="#language-reference">Language Reference</a></li>
          <li><a href="#changelog">Change Log</a></li>
        </ul>
      </div>
      <div id="try-little-smallscript" class="hidden">
        <div class="console">
          <textarea class="console-left" id="lss-source"></textarea>
          <textarea class="console-right" id="js-source"></textarea>
          <div class="console-buttons">
            <a href="#" id="eval-button" class="btn btn-success"><i class="icon-white icon-play"></i> Run</a>
          </div>
        </div>
      </div>
    </div>

    <div class="container" id="mainWrap">
      <div id="introduction">
        <p>
          <strong>Little Smallscript is a dialect of Smalltalk that compiles into JavaScript.</strong> Hidden behind the huge Smalltalk Environment, Smalltalk always had a beautiful syntax that is fit for object oriented scripting. Little Smallscript is an attempt to let Smalltalk see the light of day again. (Although I've never written Smalltalk before ;p)
        </p>
        <p>
The golden rule of LittleSmallscript is: <em>"It's just JavaScript"</em>. The code compiles one-to-one into the equivalent JS, and there is no interpretation at runtime. You can use any existing JavaScript library seamlessly from LittleSmallscript (and vice-versa). The compiled output is readable and pretty-printed, passes through <a href="http://www.jshint.com">JSHint</a> without warnings, will work in every JavaScript runtime, and tends to run as fast or faster than the equivalent handwritten JavaScript.  <span class="grey">This paragraph is borrowed from coffeescript.org</span>
        </p>
        <p>
          <strong>Latest Version:</strong> <span class="underline">1.0.0</span>
      </div>
      <div id="overview">
        <h2>Overview</h2>
        <p>
          <em>LittleSmallscript on the left, compiled JavaScript output on the right.</em>
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
"Variable declaration"
| number opposite square list math cubes |

"Assignment:"
number   := 42. 
opposite := true.
"or"
number   &lt;- 42.
opposite &lt;- true.

"Conditions:"
number := opposite ifTrue: [-42].

"Functions:"
square := [:x | x * x].

"Arrays:"
list := #(1 2 3 4 5).

"Objects:"
math := #{
  #root: Math at: #sqrt
  #square: square 
  #cube: [:x | (square value: x) * x]
}.

"Prelude methods:"
cubes := list collect: [:num | math cube: num]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var number, opposite, square, list, math, cubes;
number = 42;
opposite = true;
number = 42;
opposite = true;
number = opposite ? (function () {
  return -42;
})() : void 0;
square = function (x) {
  return (x * x);
};
list = [1, 2, 3, 4, 5];
math = {
  "root": Math.sqrt,
  "square": square,
  "cube": function (x) {
    return (square(x) * x);
  }
};
cubes = list.collect(function (num) {
  return math.cube(num);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
      </div>
      
      <div id="installation">
        <h2>Installation</h2>
        <p>Type the following sequence of commands in your terminal.</p>
        <pre class="prettyprint">
git clone https://github.com/ympbyc/LittleSmallscript.git

cd LittleSmallscript/

npm install -g
        </pre>
      </div>
      
      <div id="usage">
        <h2>Usage</h2>
        <p>When you 'npm install -g', a command line tool named 'littlesmallscript' gets installed.
        </p>
        <pre class="prettyprint">
#compile a file to JavaScript and save as .js file
littlesmallscript -c from.st
littlesmallscript --compile from.st

#print out the compiled JavaScript
littlesmallscript -p from.st
littlesmallscript --print from.st

#run an interactive LittleSmallscript
littlesmallscript -i
littlesmallscript --interactive
        </pre>
      </div>
      
      <div id="language-reference">
        <h2>Language Reference</h2>
        <p>blah blah blah</p>

        <h3>Syntax</h3>
        <p>
          LittleSmallscript has a minimum set of syntax that everyone can learn in a few minutes.
        </p>

        <p>A statement starts with an optional variable declaration.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| message1 message2 numbers |
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var message1, message2, numbers;
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>A statement body is made of one or more expressions separated by periods</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
'hello'.
1234
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
"hello";
1234;
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>Assingnments can only appear at the start of an expression</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
message1 := message2 := 'Hello, world!'.
numbers := #(1 2 3 4 5)
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
message1 = message2 = "Hello, world!";
numbers = [1, 2, 3, 4, 5];
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>A message passing expression starts with a receiver followed by selector(s) and arguments</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
"Unary messages take no arguments"
numbers pop.

"Binary messages take a JS operator and an argument"
2 + 3.

"Keyword messages take one or more selectors and arguments"
numbers at: 4 put: 100.

"Messages can be chained. This example is interpreted as ((Date new) getTime)"
Date new getTime.

"Unary messages have the highest precedence, followed by binary messages, followed by keyword messages."
a kw: b + c sel.
b + a kw: c sel.
c sel + b kw: a
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
numbers.pop();

(2 + 3);

numbers[4] = 100;

(new Date().getTime());

a.kw((b + c.sel()));
(b + a).kw(c.sel());
(c.sel() + b).kw(a);
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <p>
          Cascades are generalized form of method chaining. The left most expression becomes the receiver for all of the following messages. The product of this expression is the receiver.
        </p>
        <p class="note">
          LittleSmallscript implements Little Smalltalk style cascades. Their behaviour differ from cascades in other common implementations of Smalltalk.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
Object new ; at: 'a' put: 1 ; at: 'b' put: 2 ; at: 'c' put: 3
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
(function () {
  var _receiver = new Object();
  _receiver.a = 1;
  _receiver.b = 2;
  _receiver.c = 3;
  return _receiver;
})();
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">


        <h3>Function</h3>
        <p>
          Functions are defined by an open square bracket, optional list of parameters followed by a vertical bar, the function body, and the closing square bracket. The empty function looks like this: <span class="whiteback">[]</span>
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| square cube |

square := [:x | x * x].
cube := [:x | (square value: x) * x].

[:x| | foo |
  foo := x. 
  foo
] value: 2
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var square, cube;

square = function (x) {
  return (x * x);
};

cube = function (x) {
  return (square(x) * x);
};

(function (x) {
  var foo;
  foo = x;
  return foo;
})(2);
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Literals</h3>
        <p>
          The LittleSmallscriptscript literal for Arrays look similar to that of Smalltalk. 
          However they accept and evaluate any expression thrown into them. (in Smalltalk, only limited variety of elements are accepted)
        </p>
        <p>
          In JavaScript, objects are often used as hashes. Unlike Smalltalk, where you manualy have to "new" and "at:put:" to the Dictionary, Little Smallscript has an literal for creating objects.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| string shortString song singers bitlist kids |

"I am a
multi line comment"

string := 'I am a string. It is OK to have
newlines
inside of me'.

"A string composed of an Alpabetic character followed by Alpha-numeric characters can be created with #"
shortString := #foo.

"numbers"
1 .
-4 .

"array"
song := #('do' 're' 'mi' 'fa' 'so').

"hash"
singers := #{#Jagger: 'Rock' #Elvis: 'Roll'}.

bitlist := #(
  1 0 1
  0 0 1
  1 1 0
).

kids := #{
  #brother: #{
    #name: 'Max'
    #age:  11
  }
  #sister: #{
    #name: 'Ida'
    #age:  9
  }
}
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var string, shortString, song, singers, bitlist, kids;

string = "I am a string. It is OK to have\nnewlines\ninside of me";

shortString = "foo";

1;
-4;

song = ["do", "re", "mi", "fa", "so"];

singers = {
  "Jagger": "Rock",
  "Elvis": "Roll"
};

bitlist = [1, 0, 1, 0, 0, 1, 1, 1, 0];

kids = {
  "brother": {
    "name": "Max",
    "age": 11
  },
  "sister": {
    "name": "Ida",
    "age": 9
  }
};
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <h3>Local Variable Declarations</h3>
        <p>
          Variable declaration can only appear at the start of a statement.
          Space delimited alpha-numeric charactors placed between two vertical bars are declared as local variables.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| foo bar |
foo := bar := 1.
[| foo | 
  foo := 2.
  foo
] value. "=> 2"
foo      "=> 1"
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var foo, bar;
foo = bar = 1;
(function () {
  var foo;
  foo = 2;
  return foo
})(); //=> 2
foo;  //=> 1
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <p>Little Smallscript is a lexicaly scoped language. Temporary variables are enclosed in its function scope.</p>
        <br class="clear">

        <h3>IfTrue, IfFalse, and Conditional Assignment</h3>
        <p>There are no "if then else" syntax in Smalltalk. Instead "ifTrue" and "ifFalse" are defined as a method of Boolean's instances.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
1 ifTrue: ['1 is true'].
0 ifFalse: ['0 is false'].
foo := x ifTrue: [1] ifFalse: [2]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
1 ? (function () { return '1 is true'; })() : void 0;
0 ? void 0 : (function () { return '0 is false'; })();
foo = x ? (function () { return 1; })() : (function () { return 2; })();
            </pre>
          </div>
        </div><!-- /compare-codes -->

        <h3>Iteration Over Objects and Arrays</h3>
        <p>
          Various iteration methods are provided via the prelude module (/src/prelude.js).
          However the recommended practice is not to use this library and instead use the JS native methods like forEach and map.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| yearsOld |

"Eat Lunch"
#(#toast #cheese #wine) forEach: [:food | eat value: food].

"Objects"
require value: 'src/prelude'.
yearsOld := #{#max:10 #ida:9 #tim:11}.
ages := yearsOld collect: [:age :child | 
  child + ' is ' + age
]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var yearsOld;

["toast", "cheese", "wine"].forEach(function (food) {
  eat(food);
});

require('src/prelude');
yearsOld = {"max":10, "ida":9, "tim":11};
ages = yearsOld.map(function (age, child) {
  return ((child + " is ") + age);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        <p>While loop is created with whileTrue - an instance method of Function defined in prelude.js.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| counter |
counter := 0.
[counter &lt; 10] whileTrue: [window alert: counter. counter += 1]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var counter;

counter = 0;

(function () {
  return (counter &lt; 10);
}).whileTrue(function () {
  window.alert(counter);
  return counter += 1;
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Classes and Inheritance</h3>
        <p>
          LittleSmallscript has a class definition syntax that is an imitation of Little Smalltalk v5's.<br />
          A class definition is composed of two parts, a class header and method definition. Methods can be added anywhere in the code.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
+Object subclass:#Animal variables:#(#name).

!Animal setName: aName
  name := aName !.

!Animal move: metre
  window alert: name + ' moved ' + metre + 'm.' !.

+Animal subclass:#Snake variables:#().

!Snake move
  window alert: 'Slithering...'.
  Snake super:#move arguments:#(5) !.

Snake new
; setName: 'Sammy the Python'
; move
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var Animal;
Animal = function () {
  this.name = null;
  if (this.init) {
    this.init.apply(this, arguments);
  }
};
Animal.__super = Object.prototype;
Animal.prototype = new Object();
Animal.prototype.setName = function (aName) {
  var _this = this;
  return _this.name = aName;
};
Animal.prototype.move = function (metre) {
  var _this = this;
  return window.alert((((_this.name + " moved ") + metre) + "m."));
};
var Snake;
Snake = function () {
  if (this.init) {
    this.init.apply(this, arguments);
  }
};
Snake.__super = Animal.prototype;
Snake.prototype = new Animal();
Snake.prototype.move = function () {
  var _this = this;
  window.alert("Slithering...");
  return Snake.__super.move.apply(_this, [5]);
};
(function () {
  var _receiver = new Snake();
  _receiver.setName("Sammy the Python");
  _receiver.move();
  return _receiver;
})();
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Embedded Javascript</h3>
        <p>
          Hopefully, you'll never need to use it, but if you ever need to intersperse snippets of JavaScript within your LittleSmallscript, you can use  &lt; and &gt; to pass it straight through.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
hi := &lt;function () {
  return [document.title, "Hello Javascript"].join(": ");
}&gt;.
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
hi = function () {
  return [document.title, "Hello Javascript"].join(": ");
};
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <h3>Try/Catch/Finally</h3>
        <p>tryCatch: is an instance method of block closures.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
[
  allHellBreaksLoose.
  catsAndDogsLivingTogether
] tryCatch: [:error | 
  window alert: error
]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
(function () {
  var _ret;
  try {
    _ret = (function () {
      allHellBreaksLoose;
      return catsAndDogsLivingTogether;
    })();
  } catch (err) {
    _ret = function (error) {
      return window.alert(error);
    }(err);
  }
  return _ret;
})();
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

      </div><!-- /reference -->
      <br class="clear">
      
      <div id="changelog">
        <h2>Change Log</h2>
        
        <span class="idle"><strong>v1.0.4</strong></span><span> - Jan 29, 2013</span>
        <p>
          Inputs can now be piped-in to littlesmallscript. e.g: <pre class="prettyprint">echo '(1 to: 5) map: [ :n | n * n]' | littlesmallscript</pre>.
        </p>

        <span class="idle"><strong><a href="https://github.com/ympbyc/LittleSmallscript/zipball/v1.0.3">v1.0.3</a></strong></span><span> - Nov 2, 2012</span>
        <p>
          String literal supports backslash escaping.
          String literals compile into single quoted string instead of double quotes
        </p>

        <span class="idle"><strong><a href="https://github.com/ympbyc/LittleSmallscript/zipball/v1.0.2">v1.0.2</a></strong></span><span> - Oct 17, 2012</span>
        <p>
          Super Methods can be called using the following syntax
          <pre>
ClassName super:#superMethodName.
"or"
ClassName super:#superMethodName arguments:#(1 2 3)
          </pre>
        </p>

        <span class="idle"><strong>v1.0.0</strong></span><span> - Sep 30, 2012</span>
        <p>
          The first major version!<br />
          Every parser is now written in LittleSmallscript itself.<br />
          v1 is not backward compatible with v0.<br />
          Syntax for accessing instance variables has changed.<br />
          Class definition syntax has been added.
        </p>

        <span class="idle"><strong>v0.0.4</strong></span><span> - Sep 20, 2012</span>
        <p>
          Binary selectors are now bare js operators. (e.g: before: 1 <+> 1 now: 1 + 1)<br />
          Installed the Precedence order. Unary messages have the highest precedence, followed by binary messages, followed by keyword messages.
        </p>


        <span class="idle">v0.0.3</span><span> - Sep 19, 2012</span>
        <p>
          Hello, world!
        </p>
      </div>
      <br class="clear">
    
    </div>
    <br class="clear">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script src="assets/js/bootstrap.js">
    </script>
    <script src="assets/js/prettify.js">
    </script>

    <script src="https://raw.github.com/ympbyc/LittleSmallscript/master/bin/all-in-one.js"></script>
    <script src="assets/js/lssweb.js">
    </script>
  </body>

</html>
