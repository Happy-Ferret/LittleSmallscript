<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8">
    <title>LittleSmallscript</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LittleSmallscript is a dialect of Smalltalk that compiles into JavaScript">
    <meta name="author" content="Minori Yamashita">
    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body { padding-top: 60px; /* 60px to make the container go all the way
      to the bottom of the topbar */ }
    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
    <link href="assets/css/prettify.css" rel="stylesheet">
    <link href="assets/css/sub.css" rel="stylesheet">
    <style>
      .nav-bar { position: fixed; width: 97%; margin: 20px auto 10px auto; }
      .container { width: 800px; }
      #introduction { margin-top: 20px; }
    </style>
  </head>
  
  <body>
    <div class="navbar navbar-fixed-top nav-bar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">
            LittleSmallscript
          </a>
          <ul class="nav">
            <li>
              <a href="#">
                <b>
                  TABLE OF CONTENTS
                </b>
              </a>
            </li>
            <li>
            </li>
            <li>
            </li>
            <ul class="nav">
              <li>
                <a href="#">
                  <b>
                    TRY LITTLESMALLSCRIPT
                  </b>
                </a>
              </li>
              <li>
                <a href="#">
                  <b>
                    ANNOTATED SOURCE
                  </b>
                </a>
              </li>
              <li>
              </li>
            </ul>
          </ul>
        </div>
      </div>
    </div>
    <div class="container" id="mainWrap">
      <div id="introduction">
        <p>
          <strong>Little Smallscript is a dialect of Smalltalk that compiles into JavaScript.</strong> Hidden behind the huge Smalltalk Environment, Smalltalk always had a beautiful syntax that is fit for object oriented scripting. Little Smallscript is an attempt to let Smalltalk see the light of day again. (Although I've never written Smalltalk before ;p)
        </p>
        <p>
The golden rule of LittleSmallscript is: <em>"It's just JavaScript"</em>. The code compiles one-to-one into the equivalent JS, and there is no interpretation at runtime. You can use any existing JavaScript library seamlessly from LittleSmallscript (and vice-versa). The compiled output is readable and pretty-printed, passes through <a href="http://www.jshint.com">JSHint</a> without warnings, will work in every JavaScript runtime, and tends to run as fast or faster than the equivalent handwritten JavaScript.  <span class="grey">This paragraph is borrowed from coffeescript.org</span>
        </p>
        <p>
          <strong>Latest Version:</strong> <span class="underline">0.0.3</span>
      </div>
      <div id="overview">
        <h2>Overview</h2>
        <p>
          <em>LittleSmallscript on the left, compiled JavaScript output on the right.</em>
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
"Variable declaration"
| number opposite square list math cubes |

"Assignment:"
number   := 42.
opposite := true.

"Conditions:"
number := opposite ifTrue: [-42].

"Functions:"
square := [:x | x <*> x].

"Arrays:"
list := #(1 2 3 4 5).

"Objects:"
math := #{
  #root: Math at: sqrt
  #square: square 
  #cube: [:x | square value: x <*> x]
}.

"Prelude methods:"
cubes := list collect: [:num | math cube: num]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var number, opposite, square, list, math, cubes;

number = 42;

opposite = true;

number = opposite ? (function () {
  return -42;
})() : void 0;

square = function (x) {
  return (x * x);
};

list = [1, 2, 3, 4, 5];

math = {
  "root": Math[sqrt],
  "square": square,
  "cube": function (x) {
    return (square(x) * x);
  }
};

cubes = list.collect(function (num) {
  return math.cube(num);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
      </div>
      
      <div id="installation">
        <h2>Installation</h2>
        <p>This section is yet to be written. Until then, get it from <a href="https://github.com/ympbyc/LittleSmallscript">ympbyc/LittleSmallscript - Github</a></p>
      </div>
      
      <div id="usage">
        <h2>Usage</h2>
        <p>This section is also yet to be written. Command-line tool itself is already available and is in the /src directory.</p>
      </div>
      
      <div id="language-referaence">
        <h2>Language Reference</h2>
        <p>blah blah blah</p>

        <h3>Structure</h3>
        <div class="compare-codes">
          <pre class="prettyprint">
Statement
  optional: &lt;variableDeclaration&gt;
  many    : sequence: &lt;expression&gt; .
  required: &lt;expression&gt;

Variable Declaration
  required: |
  many    : variable
  required: |

Expression
  many    : &lt;assignment&gt;
  required: &lt;cascade&gt;

Assignment
  required: variable
  try     : :=, <-

Cascade
  required: &lt;primary&gt;
  many    : &lt;message&gt;
  many    : sequence: ; &lt;message&gt;

Primary
  try : literal, &lt;block&gt;, variable, sequence: ( &lt;cascade&gt; )

Message
  try : unarySelector, sequence: binarySelector argument, many sequence: keywordSelector argument

Block
  required: [
  optional: sequence: many: parameter |
  optional: &lt;statement&gt;
  required: ]
          </pre>
        </div><!-- /compare codes -->
        <br class="clear">

        <h3>Function</h3>
        <p>
          Functions are defined by an open bracket, optional list of parameters followed by an vertical bar, the function body, and the closing bracket. The empty function looks like this: <span class="whiteback">[]</span>
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| square cube |

square := [:x | x <*> x].
cube := [:x | square value: x <*> x]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var square, cube;

square = function (x) {
  return (x * x);
};

cube = function (x) {
  return (square(x) * x);
};
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Objects and Arrays</h3>
        <p>
          The Littlescript literal for Arrays look similar to that of Smalltalk. 
          However they accept and evaluate any expression thrown into them. (in Smalltalk, only limited variety of elements are accepted)
        </p>
        <p>
          In JavaScript, objects are often used as hashes. Unlike Smalltalk, where you manualy have to "new" and "at:put:" to the Dictionary, Little Smallscript has an literal for creating objects.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| song singers bitlist kids |

song := #('do' 're' 'mi' 'fa' 'so').

singers := #{#Jagger: 'Rock' #Elvis: 'Roll'}.

bitlist := #(
  1 0 1
  0 0 1
  1 1 0
).

kids := #{
  #brother: #{
    #name: 'Max'
    #age:  11
  }
  #sister: #{
    #name: 'Ida'
    #age:  9
  }
}
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var song, singers, bitlist, kids;

song = ["do", "re", "mi", "fa", "so"];

singers = {
  "Jagger": "Rock",
  "Elvis": "Roll"
};

bitlist = [1, 0, 1, 0, 0, 1, 1, 1, 0];

kids = {
  "brother": {
    "name": "Max",
    "age": 11
  },
  "sister": {
    "name": "Ida",
    "age": 9
  }
};
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">

        <h3>Local Variable Declarations</h3>
        <p>
          Variable declaration can only appear at the start of a statement.
          Space delimited alpha-numeric charactors placed between two vertical bars are declared as local variables.
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| foo bar |
foo := bar := 1.
[| foo | 
  foo := 2.
  foo
] value. "=> 2"
foo      "=> 1"
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var foo, bar;
foo = bar = 1;
(function () {
  var foo;
  foo = 2;
  return foo
})(); //=> 2
foo;  //=> 1
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <p>Little Smallscript is a lexicaly scoped language. Temporary variables are enclosed in its function scope.</p>
        <br class="clear">

        <h3>IfTrue, IfFalse, and Conditional Assignment</h3>
        <p>There are no "if then else" syntax in Smalltalk. Instead "ifTrue" and "ifFalse" are defined as a method of Boolean's instances.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
1 ifTrue: ['1 is true'].
0 ifFalse: ['0 is false'].
foo := x ifTrue: [1] ifFalse: [2]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
/* When optimization is enabled */
1 ? (function () { return '1 is true'; })() : void 0;
0 ? void 0 : (function () { return '0 is false'; })();
foo = x ? (function () { return 1; })() : (function () { return 2; })();
              
/* When optimization is disabled */
(1).ifTrue(function () { return '1 is true'; });
(0).ifFalse(function () { return '0 is false' });
foo = x.ifTrueifFalse(function () { return 1; }, function () { return 2; });
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <p>When optimization is enabled, ifTrue and ifFalse are compiled into conditional expressions for efficiency.</p>
        <br class="clear">

        <h3>Iteration Over Objects and Arrays</h3>
        <p>
          Various iteration methods are provided via the prelude module.
          The most basic one is "do" and "collect" (they are identical to Array.forEach and Array.map in JS)
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| yearsOld |

"Eat Lunch"
#(#toast #cheese #wine) do: [:food | eat value: food].

"Objects"
yearsOld := #{#max:10 #ida:9 #tim:11}.
ages := yearsOld collect: [:age :child | 
  child <+> ' is ' <+> age
]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var yearsOld;

["toast", "cheese", "wine"].do_(function (food) {
  eat(food);
});

yearsOld = {"max":10, "ida":9, "tim":11};
ages = yearsOld.collect(function (age, child) {
  return ((child + " is ") + age);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        <p>While loop is created with whileTrue - instance method of Function.</p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| counter |
counter := 0.
[counter &lt;&lt;&gt 10] whileTrue: [window alert: counter]
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">
var counter;

counter = 0;

(function () {
  return (counter < 10);
}).whileTrue(function () {
  window.alert(counter);
});
            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
        <h3>Classes and Inheritance</h3>
        <p>
          Little `Smalltalk' and other Smalltalk dialects have special syntax for defining classes; LittleSmallscript doesn't.<br>
          Since classes are first class objects, they are capable of handling messages. New class is created by passing "subclass" message to an existing class, and methods are attached to it with "method:at:" or "method:withKeywords:".
        </p>
        <div class="compare-codes">
          <div class="compare-left">
            <pre class="prettyprint">
| Animal Snake |

Animal <- Object subclass.

Animal method: [:name | 
  this at: #name put: name
] at: #init.

Animal method: [:metres |
  window alert: (@name <+> 'moved ' <+> metres <+> 'm.')
] at: #move.

Snake <- Animal subclass.
Snake method: [
  
            </pre>
          </div>
          <div class="compare-right">
            <pre class="prettyprint lang-js">

            </pre>
          </div>
        </div><!-- /compare-codes -->
        <br class="clear">
        
      </div><!-- /reference -->
      <br class="clear">
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script src="assets/js/bootstrap.js">
    </script>
    <script src="assets/js/prettify.js">
    </script>
    <script>
      $(function () {
        window.prettyPrint();
      });
    </script>
  </body>

</html>
